<!DOCTYPE html>
<html lang="en">
<head>
    <title>EzSpeak sidepanel</title>
    <!-- Load the Azure Speech SDK bundle first -->
    <script src="../../lib/azure-speech-sdk/microsoft.cognitiveservices.speech.sdk.bundle-min.js"></script>
    <script type="module" src="sidepanel.js"></script>
    <link rel="stylesheet" href="../../styles/sidepanel.css">
</head>
<body>
<h1>EzSpeak</h1>
<p id="detected-language">Detected language: (pending)</p>
<div id="status">
  <div id="status-message"></div>
  <div class="session-controls">
    <div id="speech-activity">
      <span id="speech-dot"></span>
      <span id="speech-label">Speech: silence</span>
    </div>
    <div class="volume-control" id="volume-control-group">
      <label for="volumeSlider">Playback:</label>
      <input type="range" id="volumeSlider" min="0" max="0.5" step="0.01" value="0.2">
      <span id="volumeValue">20%</span>
    </div>
  </div>
  <div id="audio-indicator-container" class="in-status">
    <div id="audio-indicator"></div>
  </div>
</div>
<div class="section-divider"></div>
<button id="toggleSourceTranscriptBtn" class="toggle-transcript-btn" aria-expanded="true" aria-controls="source-transcript-section">Original Transcript <span class="chevron" aria-hidden="true"></span></button>
<div id="source-transcript-section" class="transcript-section">
  <div id="source-transcript-output" class="transcript-output"></div>
</div>
<div class="section-divider"></div>
<button id="toggleTranscriptBtn" class="toggle-transcript-btn" aria-expanded="true" aria-controls="transcript-section">Translation <span class="chevron" aria-hidden="true"></span></button>
<div id="transcript-section" class="transcript-section">
  <div id="translation-output" class="transcript-output"></div>
</div>
<div class="section-divider"></div>
<div class="voice-heading" id="voice-heading" aria-label="Live AI voice output">
  <svg class="ai-icon" width="18" height="18" viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false">
    <path fill="currentColor" d="M12 2a5 5 0 0 1 5 5v2.05c1.72.45 3 2.01 3 3.87a4 4 0 0 1-4 4h-1.05A6.002 6.002 0 0 1 6 13V7a5 5 0 0 1 5-5h1Zm-1 2a3 3 0 0 0-3 3v6a4 4 0 0 0 8 0v-6a3 3 0 0 0-3-3h-2Zm7 9.92c.61-.55 1-1.34 1-2.22 0-1.05-.64-1.97-1.56-2.37l-.44-.19v4.78ZM5 11.7v1.3a7 7 0 0 0 7 7h0a7 7 0 0 0 3-.7v2.05c-1.27.41-2.56.65-3.87.65-2.4 0-4.7-.7-6.65-1.95A1 1 0 0 1 4 19v-1.28a9.94 9.94 0 0 0 1 .58V11.7Z"/>
  </svg>
  <span class="voice-heading-text">Live AI Voice</span>
</div>
<div id="voice-controls" class="voice-controls">
  <div class="voice-toggle">
    <input type="checkbox" id="voiceToggle">
    <span>Enable Voice</span>
  </div>
  <div class="voice-volume">
    <input type="range" id="ttsVolumeSlider" min="0" max="1" step="0.05" value="0.7">
  </div>
  <div class="voice-status disabled" id="voice-status">Disabled</div>
  <div class="voice-level" id="voice-level">
    <div class="voice-level-fill" id="voice-level-fill"></div>
  </div>
</div>

</body>
</html>